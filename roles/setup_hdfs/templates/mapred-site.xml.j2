<configuration>

    <property>
    <name>mapreduce.jobhistory.address</name>
    <value>{{ hadoop_yarn_resourcemanager_hostname }}:10020</value>
    </property>

    <property>
    <name>mapreduce.jobhistory.webapp.address</name>
    <value>{{ hadoop_yarn_resourcemanager_hostname }}:19888</value>
    </property>

    <property>
    <name>mapreduce.framework.name</name>
    <value>yarn</value>
    </property>

    <property>
    <name>mapreduce.admin.map.child.java.opts</name>
    <value>-server -Djava.net.preferIPv4Stack=true -Dhdp.version=${hdp.version}</value>
    <final>true</final>
    </property>

    <property>
    <name>mapreduce.admin.user.env</name>
    <value>LD_LIBRARY_PATH=/usr/hdp/${hdp.version}/hadoop/lib/native:/usr/hdp/${hdp.version}/hadoop/lib/native/Linux-amd64-64</value>
    </property>

    <property>
    <name>mapreduce.application.framework.path</name>
    <value>/hdp/apps/${hdp.version}/mapreduce/mapreduce.tar.gz#mr-framework</value>
    </property>

    <property>
    <name>mapreduce.application.classpath</name>
    <value>$PWD/mr-framework/hadoop/share/hadoop/mapreduce/*:$PWD/mr-framework/hadoop/share/hadoop/mapreduce/lib/*:$PWD/mr-framework/hadoop/share/hadoop/common/*:$PWD/mr-framework/hadoop/share/hadoop/common/lib/*:$PWD/mr-framework/hadoop/share/hadoop/yarn/*:$PWD/mr-framework/hadoop/share/hadoop/yarn/lib/*:$PWD/mr-framework/hadoop/share/hadoop/hdfs/*:$PWD/mr-framework/hadoop/share/hadoop/hdfs/lib/*:$PWD/mr-framework/hadoop/share/hadoop/tools/lib/*:/usr/hdp/${hdp.version}/hadoop/lib/hadoop-lzo-0.6.0.${hdp.version}.jar:/etc/hadoop/conf/secure</value>
    </property>

    <property>
    <name>mapreduce.map.memory.mb</name>
    <value>{{ hadoop_mapreduce_map_memory_mb }}</value>
    </property>

    <property>
    <name>mapreduce.map.java.opts</name>
    <value>{{ hadoop_mapreduce_map_java_opts }}</value>
    </property>

    <property>
    <name>mapreduce.reduce.memory.mb</name>
    <value>{{ hadoop_mapreduce_reduce_memory_mb }}</value>
    </property>

    <property>
    <name>mapreduce.reduce.java.opts</name>
    <value>{{ hadoop_mapreduce_reduce_java_opts }}</value>
    </property>

    <property>
    <name>yarn.app.mapreduce.am.resource.mb</name>
    <value>{{ hadoop_yarn_app_mapreduce_am_resource_mb }}</value>
    </property>

    <property>
    <name>yarn.app.mapreduce.am.command-opts</name>
    <value>{{ hadoop_yarn_app_mapreduce_am_command_opts }}</value>
    </property>

    <property>
    <name>mapreduce.map.speculative</name>
    <value>{{ hadoop_mapreduce_map_speculative }}</value>
    </property>

    <property>
    <name>mapreduce.reduce.speculative</name>
    <value>{{ hadoop_mapreduce_reduce_speculative }}</value>
    </property>

    <property>
    <name>mapreduce.task.io.sort.factor</name>
    <value>{{ hadoop_mapreduce_task_io_sort_factor }}</value>
    </property>

    <property>
    <name>mapreduce.task.io.sort.mb</name>
    <value>{{ hadoop_mapreduce_task_io_sort_mb }}</value>
    </property>

{% for key, value in hadoop_mapred_site_custom.items() %}
    <property>
    <name>{{ key }}</name>
    <value>{{ value }}</value>
    </property>
{% endfor %}

</configuration>
